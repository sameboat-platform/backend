# Production profile overrides
spring:
  config:
    activate:
      on-profile: prod
management:
  info:
    env:
      enabled: true
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info
sameboat:
  cors:
    # Authoritative SPA origin(s). Remove Netlify once fully cut over.
    allowed-origins:
      - https://sameboatplatform.com
      - https://www.sameboatplatform.com
      - https://sameboatplatform.org  # kept for reference
      - https://www.sameboatplatform.org  # kept for reference
      - https://app.sameboatplatform.org
      - https://app-sameboat.netlify.app  # TEMP fallback; remove when deprecated
      - https://deploy-preview-*--app-sameboat.netlify.app

  cookie:
    secure: true
    domain: ""                # leave blank -> dynamic based on (X-)Forwarded-Host against valid-domains
    valid-domains:
      - sameboatplatform.com
      - sameboatplatform.org
  session:
    ttl-days: 14

# Notes:
# - Proxy path (sameboatplatform.com): X-Forwarded-Host should be sameboatplatform.com -> cookie Domain=sameboatplatform.com (no leading dot).
# - Direct Render path (api-sameboat.onrender.com): no apex match -> omit Domain -> host-only cookie.
